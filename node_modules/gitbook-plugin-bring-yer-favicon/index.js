var fs = require('fs');
var path = require('path');


module.exports = {
	// Map of hooks
	hooks: {
		"finish" : function () {
			const { favicons } = this.config.get('pluginsConfig')['bring-yer-favicon'];
			const outRoot = this.output.root();
			if (favicons) {
				Object.keys(favicons).forEach(key => {
					const source = path.join(process.cwd(), favicons[key]);
					const dest = path.join(outRoot, 'gitbook', 'images', key);
					if (source && fs.existsSync(source) && fs.existsSync(dest)) {
						fs.unlinkSync(dest);
						fs.createReadStream(source).pipe(fs.createWriteStream(dest));
					}
				});
			}
		}
	},

	// Map of new blocks
	blocks: {},

	// Map of new filters
	filters: {}
};
